<div class="page-container">
  <div class="page-header">
    <h1>
      <span jhiTranslate="sidebar.recruitment.title"></span>
      -
      <span jhiTranslate="evaluation.overviewHeader"></span>
    </h1>
  </div>

  <jhi-search-filter-sort-bar
    [searchText]="'evaluation.searchFilterSortBar.searchText' | translate"
    [totalRecords]="total()"
    [singleEntity]="'evaluation.application' | translate"
    [multipleEntities]="'evaluation.applications' | translate"
    (searchOutput)="loadOnSearchEmit($event)"
    (filterOutput)="loadOnFilterEmit($event)"
    (sortOutput)="loadOnSortEmit($event)"
    [filters]="[
      {
        filterId: 'jobTitle',
        filterLabel: 'evaluation.tableHeaders.job',
        filterSearchPlaceholder: 'evaluation.filterOptions.jobSearchPlaceholder',
        filterOptions: allAvailableJobNames(),
      },
      {
        filterId: 'status',
        filterLabel: 'evaluation.tableHeaders.status',
        filterSearchPlaceholder: 'evaluation.filterOptions.stateSearchPlaceholder',
        filterOptions: availableStatusLabels,
        shouldTranslateOptions: true,
      },
    ]"
    [sortableFields]="sortableFields"
  />

  <div class="my-positions-container">
    <jhi-dynamic-table
      [columns]="columns()"
      [data]="pageData()"
      [totalRecords]="total()"
      [page]="page()"
      [rows]="pageSize()"
      [selectable]="false"
      (lazyLoad)="loadOnTableEmit($event)"
    />
  </div>

  <ng-template #appliedAtTemplate let-application>
    {{ (application.appliedAt?.toString() | localizedDate) || '-' }}
  </ng-template>

  <ng-template #actionTemplate let-application>
    <jhi-button icon="eye" [tooltip]="'button.view' | translate" variant="text" (click)="navigateToDetail(application)" />
  </ng-template>

  <ng-template #stateTemplate let-application>
    <jhi-tag
      [text]="'evaluation.statusBadge.' + (application.state || '') | translate"
      [color]="stateSeverityMap()[application.state] || 'info'"
      [tooltipText]="'evaluation.statusBadge.tooltips.' + (application.state || '')"
      width="7rem"
    />
  </ng-template>
</div>
