<div class="input-container">
  <div class="label-top label-input-wrapper">
    <div class="label-with-tooltip">
      @if (label(); as label) {
        <label class="custom-label" [for]="inputId()">
          {{ shouldTranslate() ? (label | translate) : label }}
          @if (required()) {
            <span class="required">*</span>
          }
        </label>
      }
      @if (icon(); as icon) {
        <span class="tooltip-wrapper">
          @if (icon === 'circle-info' && tooltipText()) {
            <fa-icon
              class="icon"
              [icon]="['fas', icon]"
              [pTooltip]="shouldTranslate() ? (tooltipText() ?? '' | translate) : (tooltipText() ?? '')"
              tooltipPosition="top"
            />
          } @else {
            <fa-icon class="icon" [icon]="['fas', icon ?? '']" />
          }
        </span>
      }
    </div>

    <div [class.error]="inputState() === 'invalid'" class="input-wrapper">
      @if (control()) {
        <input
          (blur)="onBlur()"
          (focus)="onFocus()"
          [id]="inputId()"
          [formControl]="formControl()"
          [pAutoFocus]="autofocus()"
          [placeholder]="shouldTranslate() && placeholder() ? (placeholder() ?? '' | translate) : (placeholder() ?? '')"
          [required]="required()"
          [style]="{ width: width() }"
          autocomplete="off"
          class="custom-input"
          pInputText
        />
      } @else {
        <input
          (blur)="onBlur()"
          (focus)="onFocus()"
          (ngModelChange)="onInputChange($event)"
          [id]="inputId()"
          [ngModel]="model()"
          [pAutoFocus]="autofocus()"
          [placeholder]="shouldTranslate() && placeholder() ? (placeholder() ?? '' | translate) : (placeholder() ?? '')"
          [required]="required()"
          [style]="{ width: width() }"
          autocomplete="off"
          class="custom-input"
          pInputText
        />
      }
    </div>
    @if (errorEnabled()) {
      <div class="error-text">
        @if (inputState() === 'invalid' && !isFocused()) {
          {{ errorMessage() }}
        }
      </div>
    }
  </div>
</div>
