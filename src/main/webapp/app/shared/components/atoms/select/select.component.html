<div
  [ngClass]="{
    disabled: disabled(),
  }"
  class="label-top select-wrapper"
>
  @if (label()) {
    <label class="custom-label" [for]="selectId"
      >{{ label() }}
      @if (required()) {
        <span class="required">*</span>
      }
      @if (icon()) {
        @if (icon() === 'circle-info' && tooltipText()) {
          <fa-icon class="icon" [icon]="['fas', icon() ?? '']" [pTooltip]="tooltipText()" tooltipPosition="top" />
        } @else {
          <fa-icon class="icon" [icon]="['fas', icon() ?? '']" />
        }
      }
    </label>
  }
  <p-select
    (ngModelChange)="onSelectionChange($event)"
    (onHide)="isOpen = false"
    (onShow)="isOpen = true"
    [disabled]="disabled()"
    [inputId]="selectId"
    [ngModel]="selected()"
    [optionLabel]="labelField()"
    [optionValue]="valueField()"
    [options]="items()"
    [placeholder]="placeholder()"
    [style]="{ width: width() }"
    [filter]="filter()"
    [showClear]="showClear()"
    [appendTo]="appendTo()"
    [dataKey]="dataKey()"
    class="custom-select"
  >
    <!-- Render each select item -->
    <ng-template pTemplate="item" let-item>
      @if (!translateItems()) {
        {{ item[labelField()] }}
      } @else {
        <span jhiTranslate="{{ item[labelField()] }}"></span>
      }
    </ng-template>

    <!-- Render each selected select item -->
    <ng-template pTemplate="selectedItem" let-item>
      @if (!translateItems()) {
        {{ item[labelField()] }}
      } @else {
        <span jhiTranslate="{{ item[labelField()] }}"></span>
      }
    </ng-template>

    <ng-template pTemplate="dropdownicon">
      <fa-icon class="text-text-primary" [icon]="isOpen ? ['fas', 'chevron-up'] : ['fas', 'chevron-down']" />
    </ng-template>

    <ng-template pTemplate="clearicon">
      <div class="custom-clear-wrapper">
        <fa-icon icon="times" />
      </div>
    </ng-template>
  </p-select>
  @if (errorEnabled()) {
    <div class="error-text"></div>
  }
</div>
