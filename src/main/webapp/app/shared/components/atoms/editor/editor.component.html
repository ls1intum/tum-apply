<div class="input-container">
  <div class="label-top label-input-wrapper">
    @if (label()) {
      <label class="custom-label" [for]="id()">
        @if (shouldTranslate()) {
          {{ label()! | translate }}
        } @else {
          {{ label() }}
        }
        @if (required()) {
          <span class="required">*</span>
        }
        @if (icon()) {
          @if (icon() === 'circle-info' && tooltipText()) {
            @if (shouldTranslate()) {
              <fa-icon class="icon" [icon]="['fas', icon() ?? '']" [pTooltip]="tooltipText()! | translate" tooltipPosition="top" />
            } @else {
              <fa-icon class="icon" [icon]="['fas', icon() ?? '']" [pTooltip]="tooltipText()" tooltipPosition="top" />
            }
          } @else {
            <fa-icon class="icon" [icon]="['fas', icon() ?? '']" />
          }
        }
      </label>
    }

    <div class="input-wrapper" [class.error]="isEmpty()" contenteditable="false" (focusin)="onFocus()" (focusout)="onBlur()" #editorElem>
      <quill-editor
        class="custom-quill-editor"
        (onFocus)="onFocus()"
        (onBlur)="onBlur()"
        [placeholder]="shouldTranslate() && placeholder() ? (placeholder()! | translate) : placeholder()"
        [ngModel]="editorValue()"
        (onContentChanged)="textChanged($event)"
      >
        <div quill-editor-toolbar>
          <span class="ql-formats">
            <button type="button" class="ql-bold" aria-label="Bold"></button>
            <button type="button" class="ql-italic" aria-label="Italic"></button>
            <button type="button" class="ql-underline" aria-label="Underline"></button>
          </span>
          <span class="ql-formats">
            <select class="ql-color" aria-label="color"></select>
            <select class="ql-background" aria-label="background"></select>
          </span>
          <span class="ql-formats">
            <button class="ql-list" value="ordered" aria-label="Ordered List" type="button"></button>
            <button class="ql-list" value="bullet" aria-label="Unordered List" type="button"></button>
            <select class="ql-align">
              <option selected></option>
              <option value="center" jhiTranslate="editor.align.center" aria-label="Align center"></option>
              <option value="right" jhiTranslate="editor.align.right" aria-label="Align right"></option>
              <option value="justify" jhiTranslate="editor.align.justify" aria-label="Align justify"></option>
            </select>
          </span>
          <span class="ql-formats">
            <button class="ql-link" aria-label="Insert Link" type="button"></button>
          </span>
        </div>
      </quill-editor>
    </div>
    <div class="editor-footer">
      <div class="error-text">
        @if (helperText()) {
          <!-- Translation Pipe is necessary here since the translation of the ql headers is not working with the jhiTranslate directive -->
          <!--            <span class="helper-text" jhiTranslate="{{ helperText() }}"></span>-->
          <span class="helper-text">{{ helperText()! | translate }}</span>
        }
        @if (isEmpty() || isOverCharLimit()) {
          {{ errorMessage() }}
        }
      </div>
      <!-- Character Count Display -->
      <div [ngClass]="charCounterColor()">{{ characterCount() }}/{{ characterLimit() }}</div>
    </div>
  </div>
</div>
