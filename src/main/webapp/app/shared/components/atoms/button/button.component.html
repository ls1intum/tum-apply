<div class="relative">
  @if (numberOfFavorites()) {
    <p-overlaybadge [value]="numberOfFavorites()" class="button-overlay">
      <ng-container [ngTemplateOutlet]="button" />
    </p-overlaybadge>
  } @else {
    <ng-container [ngTemplateOutlet]="button" />
  }
</div>
<ng-template #button>
  <p-button
    [ariaLabel]="label() === undefined ? icon() : undefined"
    [disabled]="disabled()"
    [loading]="loading()"
    [rounded]="label() === undefined"
    [severity]="severity()"
    [styleClass]="buttonClass()"
    [type]="type()"
    [variant]="variant()"
  >
    @if (labelLeft()) {
      <ng-container [ngTemplateOutlet]="labelTemplate" />
      <ng-container [ngTemplateOutlet]="iconTemplate" />
    } @else {
      <ng-container [ngTemplateOutlet]="iconTemplate" />
      <ng-container [ngTemplateOutlet]="labelTemplate" />
    }

    @if (isExternalLink()) {
      <fa-icon class="external-icon" size="xs" [icon]="faArrowUpRightFromSquare" aria-hidden="true" />
    }
  </p-button>

  <ng-template #iconTemplate>
    @if (icon() !== undefined) {
      <fa-icon [icon]="[iconPrefix(), icon() ?? '']" />
    }
  </ng-template>

  <ng-template #labelTemplate>
    @if (label() !== undefined) {
      @if (shouldTranslate()) {
        <span jhiTranslate="{{ label() }}"></span>
      } @else {
        {{ label() }}
      }
    }
  </ng-template>
</ng-template>
