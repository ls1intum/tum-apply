<div [class.active]="isCalendarOpen()" class="label-top datepicker-container">
  <label class="custom-label">
    @if (label() !== undefined) {
      @if (shouldTranslate()) {
        <span jhiTranslate="{{ label() }}"></span>
      } @else {
        {{ label() }}
      }
    }
    @if (required()) {
      <span class="required">*</span>
    }
    @if (icon(); as icon) {
      @if (icon === 'circle-info' && tooltipText()) {
        @if (shouldTranslate()) {
          <fa-icon class="icon" [icon]="['fas', icon]" [pTooltip]="tooltipText() ?? '' | translate" tooltipPosition="top" />
        } @else {
          <fa-icon class="icon" [icon]="['fas', icon]" [pTooltip]="tooltipText() ?? ''" tooltipPosition="top" />
        }
      } @else {
        <fa-icon class="icon" [icon]="['fas', icon]" />
      }
    }
  </label>
  <p-datepicker
    (ngModelChange)="onDateChange($event)"
    (onHide)="isCalendarOpen.set(false)"
    (onShow)="isCalendarOpen.set(true)"
    [(ngModel)]="modelDate"
    [placeholder]="shouldTranslate() && placeholder() ? (placeholder() ?? '' | translate) : placeholder()"
    [disabled]="disabled()"
    [minDate]="effectiveMinDate()"
    [maxDate]="maxDate()"
    [defaultDate]="defaultDate()"
    [showButtonBar]="true"
    [style]="{ width: width() }"
    class="custom-datepicker"
    [dateFormat]="dateFormat()"
    iconDisplay="button"
    inputId="startDate"
    showIcon="true"
    [inputStyleClass]="'w-full'"
  >
    <ng-template pTemplate="triggericon">
      <fa-icon [icon]="['fas', 'calendar']" class="text-text-on-primary" />
    </ng-template>
  </p-datepicker>
  <div class="error-text"></div>
</div>
