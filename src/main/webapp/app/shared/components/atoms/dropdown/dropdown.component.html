<div class="dropdown-container">
  @if (label) {
    <div class="dropdown-label">{{ label }}<span class="required">*</span></div>
  }
  <div (click)="toggleDropdown()" [class.open]="isOpen" class="custom-dropdown">
    <div class="dropdown-selected">
      <span class="dropdown-text">{{ selected ? getDisplayValue(selected) : placeholder }}</span>
      <span [class.open]="isOpen" class="chevron-down">
        <fa-icon [icon]="faChevronDown"></fa-icon>
      </span>
    </div>
    @if (isOpen) {
      <div class="dropdown-menu">
        <div class="dropdown-items">
          @for (item of allItems; track item[valueField]) {
            <div
              (click)="selectItem(item); $event.stopPropagation()"
              [class.active]="selected && selected[valueField] === item[valueField]"
              class="dropdown-item"
            >
              {{ getDisplayValue(item) }}
            </div>
          }
          @if (allItems.length === 0) {
            <div class="dropdown-no-results">No results found</div>
          }
        </div>
      </div>
    }
  </div>
</div>

<!-- PrimeNG Dropdown Component -->

<!-- <p-dropdown
  [options]="options"
  optionLabel="name"
  [(ngModel)]="value"
  [placeholder]="placeholderText"
  (onShow)="onShow()"
  (onHide)="onHide()"
  [showClear]="true"
  [appendTo]="'body'"
>
  <ng-template pTemplate="dropdownicon">
    <fa-icon [icon]="isOpen ? faChevronUp : faChevronDown"></fa-icon>
  </ng-template>
</p-dropdown> -->
