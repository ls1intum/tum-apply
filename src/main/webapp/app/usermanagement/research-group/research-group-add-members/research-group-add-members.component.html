<div class="flex flex-col gap-4">
  <!-- Search Bar -->
  <div class="w-full">
    <jhi-search-bar [searchText]="'researchGroup.members.searchPlaceholder' | translate" (searchOutput)="onSearch($event)" />
  </div>

  <!-- User List -->
  <div class="flex flex-col max-h-96 overflow-y-auto border border-gray-200 rounded-lg">
    @for (selection of filteredUserSelections; track selection.user.userId) {
      <div
        class="flex items-center gap-3 p-3 hover:bg-gray-50 cursor-pointer"
        role="button"
        tabindex="0"
        (click)="selection.selected = !selection.selected"
        (keydown.enter)="selection.selected = !selection.selected"
        (keydown.space)="selection.selected = !selection.selected; $event.preventDefault()"
      >
        <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold">
          {{ selection.user.firstName?.charAt(0) }}{{ selection.user.lastName?.charAt(0) }}
        </div>
        <div class="flex-1">
          <div class="font-medium">{{ selection.user.firstName }} {{ selection.user.lastName }}</div>
          <div class="text-sm text-gray-600">{{ selection.user.email }}</div>
        </div>
        <p-checkbox [(ngModel)]="selection.selected" [binary]="true" (click)="$event.stopPropagation()" />
      </div>
    }
  </div>

  <!-- Action Buttons -->
  <div class="flex justify-end gap-2 pt-4">
    <jhi-button [label]="'button.cancel' | translate" severity="secondary" variant="outlined" (click)="onCancel()" />
    <jhi-button
      [label]="'researchGroup.members.addMembersButton' | translate"
      severity="primary"
      [disabled]="selectedUsers.length === 0"
      (click)="onAddMembers()"
    />
  </div>
</div>
