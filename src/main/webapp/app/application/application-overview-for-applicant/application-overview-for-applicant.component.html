<jhi-toast />
<div class="body mx-30">
  <header class="header">
    <h1 jhiTranslate="entity.application_overview.applicant.header" class="h1-text"></h1>
  </header>

  <jhi-dynamic-table
    [columns]="columns()"
    [data]="pageData()"
    [totalRecords]="total()"
    [rows]="pageSize()"
    [selectable]="true"
    (lazyLoad)="loadPage($event)"
  />

  <ng-template #stateTemplate let-row>
    @switch (row.applicationState) {
      @case ('SAVED') {
        <p-badge [value]="'entity.applicationOverview.state.draft' | translate" severity="secondary" />
      }
      @case ('SENT') {
        <p-badge [value]="'entity.applicationOverview.state.submitted' | translate" />
      }
      @case ('ACCEPTED') {
        <p-badge [value]="'entity.applicationOverview.state.accepted' | translate" severity="success" />
      }
      @case ('IN_REVIEW') {
        <p-badge [value]="'entity.applicationOverview.state.submitted' | translate" />
      }
      @case ('REJECTED') {
        <p-badge [value]="'entity.applicationOverview.state.rejected' | translate" severity="danger" />
      }
      @case ('WITHDRAWN') {
        <p-badge [value]="'entity.applicationOverview.state.withdrawn' | translate" severity="contrast" />
      }
      @case ('JOB_CLOSED') {
        <p-badge [value]="'entity.applicationOverview.state.closed' | translate" severity="contrast" />
      }
      @default {
        <p-badge [value]="row.applicationState" severity="warn" />
      }
    }
  </ng-template>

  <ng-template #actionTemplate let-row>
    <div class="flex space-x-2">
      <jhi-button
        [label]="'entity.applicationOverview.actions.view' | translate"
        severity="primary"
        (click)="onViewApplication(row.applicationId)"
      />
      @if (['SENT', 'IN_REVIEW'].includes(row.applicationState)) {
        <jhi-button
          [label]="'entity.applicationOverview.actions.withdraw' | translate"
          severity="danger"
          variant="outlined"
          (click)="onWithdrawApplication(row.applicationId)"
        />
      }

      @if (['SAVED'].includes(row.applicationState)) {
        <jhi-button
          [label]="'entity.applicationOverview.actions.update' | translate"
          severity="primary"
          variant="outlined"
          (click)="onUpdateApplication(row.applicationId)"
        />
      }

      @if (['SAVED'].includes(row.applicationState)) {
        <jhi-button
          [label]="'entity.applicationOverview.actions.delete' | translate"
          severity="danger"
          (click)="onDeleteApplication(row.applicationId)"
        />
      }
    </div>
  </ng-template>
</div>
