<div class="page-container">
  <header class="page-header">
    <h1 jhiTranslate="entity.application_overview.applicant.header" class="h1-text"></h1>
  </header>

  <jhi-dynamic-table
    [columns]="columns()"
    [data]="pageData()"
    [totalRecords]="total()"
    [rows]="pageSize()"
    [selectable]="true"
    (lazyLoad)="loadPage($event)"
  />

  <ng-template #stateTemplate let-row>
    <jhi-application-state-for-applicants [state]="row.applicationState" />
  </ng-template>

  <ng-template #actionTemplate let-row>
    <div class="flex space-x-2">
      <jhi-button
        [ariaLabel]="'button.view' | translate"
        [icon]="'eye'"
        variant="text"
        severity="primary"
        [tooltip]="'button.view' | translate"
        (click)="onViewApplication(row.applicationId)"
      />

      <jhi-button
        [ariaLabel]="'button.edit' | translate"
        [icon]="'pencil'"
        severity="primary"
        variant="text"
        [tooltip]="row.applicationState !== 'SAVED' ? ('button.tooltip.editDisabled' | translate) : ('button.edit' | translate)"
        (click)="onUpdateApplication(row.applicationId)"
        [disabled]="row.applicationState !== 'SAVED'"
      />

      @if (['SENT', 'IN_REVIEW'].includes(row.applicationState)) {
        <jhi-confirm-dialog
          [label]="'button.withdraw' | translate"
          [iconOnly]="true"
          [header]="'entity.applicationOverview.dialogs.withdrawHeader' | translate"
          [message]="'entity.applicationOverview.dialogs.withdrawMessage' | translate"
          [data]="row.applicationId"
          confirmIcon="withdraw"
          (confirmed)="onWithdrawApplication(row.applicationId)"
          severity="danger"
          [tooltip]="'button.withdraw' | translate"
        />
      }

      @if (['SAVED'].includes(row.applicationState)) {
        <jhi-confirm-dialog
          [label]="'button.delete' | translate"
          [iconOnly]="true"
          [header]="'entity.applicationOverview.dialogs.deleteHeader' | translate"
          [message]="'entity.applicationOverview.dialogs.deleteMessage' | translate"
          [data]="row.applicationId"
          confirmIcon="trash"
          (confirmed)="onDeleteApplication(row.applicationId)"
          severity="danger"
          [tooltip]="'button.delete' | translate"
        />
      }
    </div>
  </ng-template>
  <ng-template #jobNameTemplate let-row>
    <div class="w-full h-full flex justify-between items-center">
      <a class="clickable-link" [routerLink]="['/job/detail', row.jobId]">{{ row.jobTitle }}</a>
    </div>
  </ng-template>
</div>
