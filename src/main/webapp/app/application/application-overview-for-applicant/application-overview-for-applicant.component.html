<!-- Confirm Dialogs -->
<jhi-confirm-dialog
  #withdrawDialog
  [label]="'button.withdraw' | translate"
  [header]="'entity.applicationOverview.dialogs.withdrawHeader' | translate"
  [message]="'entity.applicationOverview.dialogs.withdrawMessage' | translate"
  severity="danger"
  confirmIcon="withdraw"
  [showOpenButton]="false"
  (confirmed)="currentApplicationId() && onWithdrawApplication(currentApplicationId()!)"
/>

<jhi-confirm-dialog
  #deleteDialog
  [label]="'button.delete' | translate"
  [header]="'entity.applicationOverview.dialogs.deleteHeader' | translate"
  [message]="'entity.applicationOverview.dialogs.deleteMessage' | translate"
  severity="danger"
  confirmIcon="trash"
  [showOpenButton]="false"
  (confirmed)="currentApplicationId() && onDeleteApplication(currentApplicationId()!)"
/>

<div class="page-container">
  <header class="page-header">
    <h1 jhiTranslate="entity.application_overview.applicant.header" class="h1-text"></h1>
  </header>

  @if (total() > 0 || loading()) {
    <jhi-dynamic-table
      [columns]="columns()"
      [data]="pageData()"
      [totalRecords]="total()"
      [rows]="pageSize()"
      [selectable]="true"
      (lazyLoad)="loadPage($event)"
    />
  } @else {
    <div class="flex flex-col items-center justify-center py-16 gap-4 text-center">
      <div class="[&_button]:!rounded-full">
        <jhi-button icon="file-lines" severity="contrast" class="pointer-events-none" />
      </div>
      <h2 jhiTranslate="entity.applicationOverview.emptyState.headline" class="text-xl font-semibold text-text"></h2>
      <p jhiTranslate="entity.applicationOverview.emptyState.description1" class="text-text-primary max-w-3xl"></p>
      <p jhiTranslate="entity.applicationOverview.emptyState.description2" class="text-text-primary max-w-3xl"></p>
      <jhi-button
        label="entity.applicationOverview.emptyState.browsePositions"
        [shouldTranslate]="true"
        (click)="onBrowsePositions()"
        variant="outlined"
      />
    </div>
  }

  <ng-template #stateTemplate let-row>
    <jhi-application-state-for-applicants [state]="row.applicationState" />
  </ng-template>

  <ng-template #actionTemplate let-row>
    <div class="flex justify-end gap-1">
      <jhi-button [tooltip]="'button.view' | translate" icon="eye" variant="text" (click)="onViewApplication(row.applicationId)" />
      <jhi-button
        [tooltip]="getMenuItems()(row).length > 0 ? ('button.actions' | translate) : ('button.noFurtherActions' | translate)"
        icon="ellipsis-vertical"
        variant="text"
        (click)="menu.toggle($event)"
        [disabled]="getMenuItems()(row).length === 0"
      />
      <jhi-menu #menu [items]="getMenuItems()(row)" [shouldTranslate]="true" />
    </div>
  </ng-template>
  <ng-template #jobNameTemplate let-row>
    <div class="w-full h-full flex justify-between items-center">
      <a class="clickable-link" [routerLink]="['/job/detail', row.jobId]">{{ row.jobTitle }}</a>
    </div>
  </ng-template>

  <ng-template #timeSinceCreationTemplate let-row>
    {{ row.createdAt | timeAgo }}
  </ng-template>
</div>
