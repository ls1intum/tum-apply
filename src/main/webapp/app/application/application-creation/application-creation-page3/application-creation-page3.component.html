@if (page3Form; as form) {
  <form [formGroup]="form">
    <p-divider layout="horizontal">
      <span jhiTranslate="entity.applicationPage3.section.startAndDocuments"></span>
    </p-divider>

    @if (data(); as data) {
      <div class="form-row w-full lg:w-1/2 mb-6 lg:pe-3">
        <div class="form-field">
          <label>
            <span jhiTranslate="entity.applicationPage3.label.desiredStartDate"></span>
            <fa-icon
              class="icon"
              [icon]="['fas', 'circle-info']"
              [pTooltip]="'entity.applicationPage3.tooltip.desiredStartDate' | translate"
              tooltipPosition="top"
            />
          </label>
          <jhi-datepicker
            [selectedDate]="data.desiredStartDate"
            label=""
            [placeholder]="'entity.applicationPage3.placeholder.selectStartDate' | translate"
            width="100%"
            (selectedDateChange)="setDesiredStartDate($event)"
          />
        </div>
      </div>
    }

    @if (applicationIdForDocuments(); as applicationId) {
      <div class="mb-6 flex flex-col gap-6 lg:flex-row lg:gap-8">
        <!-- CV Upload -->
        <div class="form-field flex-1">
          <label>
            <span jhiTranslate="entity.applicationPage3.label.curriculumVitae"></span>
            <fa-icon
              class="icon"
              [icon]="['fas', 'circle-info']"
              [pTooltip]="'entity.applicationPage2.tooltip.filenamePrivacy' | translate"
              tooltipPosition="top"
            />
          </label>
          <jhi-upload-button
            uploadKey="entity.upload.upload_instruction.CV"
            documentType="CV"
            [applicationId]="applicationId"
            [documentIds]="computedDocumentIdsCvSet()"
            (documentIdsChange)="cvDocsSetValidity($event)"
            [markAsRequired]="true"
          />
        </div>

        <!-- Reference Upload -->
        <div class="form-field flex-1">
          <label>
            <span jhiTranslate="entity.applicationPage3.label.additionalReferences"></span>
            <fa-icon
              class="icon"
              [icon]="['fas', 'circle-info']"
              [pTooltip]="'entity.applicationPage2.tooltip.filenamePrivacy' | translate"
              tooltipPosition="top"
            />
          </label>
          <jhi-upload-button
            uploadKey="entity.upload.upload_instruction.REFERENCE"
            documentType="REFERENCE"
            [applicationId]="applicationId"
            [documentIds]="documentIdsReferences()"
          />
        </div>
      </div>
    }

    <p-divider layout="horizontal">
      <span jhiTranslate="entity.applicationPage3.section.motivationAndBackground"></span>
    </p-divider>

    @if (hasInitialized()) {
      <div class="form-row mb-6">
        <div class="form-field">
          <jhi-editor
            label="entity.applicationPage3.label.motivation"
            [control]="page3Form.controls.motivation"
            [required]="true"
            helperText="entity.applicationPage3.sublabel.motivation"
            tooltipText="entity.applicationPage3.tooltip.motivation"
            placeholder="entity.applicationPage3.floatlabel.motivation"
            [characterLimit]="1000"
            icon="circle-info"
            [shouldTranslate]="true"
          />
        </div>
      </div>

      <div class="form-row mb-6">
        <div class="form-field">
          <jhi-editor
            label="entity.applicationPage3.label.skills"
            [control]="page3Form.controls.skills"
            [required]="true"
            helperText="entity.applicationPage3.sublabel.skills"
            tooltipText="entity.applicationPage3.tooltip.skills"
            placeholder="entity.applicationPage3.floatlabel.skills"
            [characterLimit]="1000"
            icon="circle-info"
            [shouldTranslate]="true"
          />
        </div>
      </div>

      <div class="form-row">
        <div class="form-field">
          <jhi-editor
            label="entity.applicationPage3.label.experiences"
            [control]="page3Form.controls.experiences"
            [required]="true"
            helperText="entity.applicationPage3.sublabel.experiences"
            tooltipText="entity.applicationPage3.tooltip.experiences"
            placeholder="entity.applicationPage3.floatlabel.experiences"
            [characterLimit]="1000"
            icon="circle-info"
            [shouldTranslate]="true"
          />
        </div>
      </div>
    }
  </form>
}
