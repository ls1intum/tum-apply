<form [formGroup]="page2Form()">
  <p-divider layout="horizontal">
    <span jhiTranslate="entity.applicationPage2.section.bachelor"></span>
  </p-divider>

  <div class="form-row">
    <div class="w-1/2 pr-4">
      <jhi-string-input
        label="{{ 'entity.applicationPage2.label.bachelorDegreeName' | translate }}"
        [required]="true"
        [(model)]="data().bachelorDegreeName"
        [control]="page2Form().get('bachelorDegreeName') ?? undefined"
        icon="circle-info"
        [tooltipText]="'entity.applicationPage2.tooltip.bachelorDegreeName' | translate"
      />
    </div>
    <div class="w-1/2 pr-4">
      <jhi-string-input
        label="{{ 'entity.applicationPage2.label.bachelorDegreeUniversity' | translate }}"
        [required]="true"
        [(model)]="data().bachelorDegreeUniversity"
        [control]="page2Form().controls.bachelorDegreeUniversity"
        icon="circle-info"
        [tooltipText]="'entity.applicationPage2.tooltip.bachelorDegreeUniversity' | translate"
      />
    </div>
  </div>

  <div class="form-row">
    <div class="w-1/2 pr-4">
      <jhi-select
        label="{{ 'entity.applicationPage2.label.bachelorGradingScale' | translate }}"
        [disabled]="true"
        width="100%"
        [required]="true"
        [items]="bachelorGradingScaleLocal"
        [(selected)]="data().bachelorGradingScale"
        icon="circle-info"
        [tooltipText]="'entity.applicationPage2.tooltip.bachelorGradingScale' | translate"
      />
    </div>
    <div class="w-1/2 pr-4">
      @switch (data().bachelorGradingScale.value) {
        @case (BachelorGradingScaleEnumLocal.OneToFour) {
          <ng-container
            *ngTemplateOutlet="
              gradeInput;
              context: {
                labelKey: 'entity.applicationPage2.label.bachelorGrade',
                tooltipKey: 'entity.applicationPage2.tooltip.bachelorGrade',
                control: page2Form().controls.bachelorGrade,
                model: getBachelorGradeAsNumber(),
                modelChange: setBachelorGradeAsNumber,
              }
            "
          />
        }
        @default {
          <span>Not Implemented</span>
        }
      }
    </div>
  </div>

  @if (applicationIdForDocuments(); as applicationId) {
    <div class="form-row justify-center">
      <div class="w-1/2">
        <jhi-upload-button
          uploadKey="entity.upload.upload_instruction.BACHELOR_TRANSCRIPT"
          documentType="BACHELOR_TRANSCRIPT"
          [applicationId]="applicationId"
          [documentIds]="documentIdsBachelorTranscript()"
        />
      </div>
      <fa-icon
        icon="circle-info"
        class="upload-info-icon"
        pTooltip="{{ 'entity.applicationPage2.tooltip.filenamePrivacy' | translate }}"
        tooltipPosition="top"
      />
    </div>
  }

  <p-divider layout="horizontal">
    <span jhiTranslate="entity.applicationPage2.section.master"></span>
  </p-divider>

  <div class="form-row">
    <div class="w-1/2 pr-4">
      <jhi-string-input
        label="{{ 'entity.applicationPage2.label.masterDegreeName' | translate }}"
        [required]="true"
        [(model)]="data().masterDegreeName"
        [control]="page2Form().controls.masterDegreeName"
        icon="circle-info"
        [tooltipText]="'entity.applicationPage2.tooltip.masterDegreeName' | translate"
      />
    </div>
    <div class="w-1/2 pr-4">
      <jhi-string-input
        label="{{ 'entity.applicationPage2.label.masterDegreeUniversity' | translate }}"
        [required]="true"
        [(model)]="data().masterDegreeUniversity"
        [control]="page2Form().controls.masterDegreeUniversity"
        icon="circle-info"
        [tooltipText]="'entity.applicationPage2.tooltip.masterDegreeUniversity' | translate"
      />
    </div>
  </div>

  <div class="form-row">
    <div class="w-1/2 pr-4">
      <jhi-select
        label="{{ 'entity.applicationPage2.label.masterGradingScale' | translate }}"
        [disabled]="true"
        width="100%"
        [required]="true"
        [items]="masterGradingScaleLocal"
        [(selected)]="data().masterGradingScale"
        icon="circle-info"
        [tooltipText]="'entity.applicationPage2.tooltip.masterGradingScale' | translate"
      />
    </div>
    <div class="w-1/2 pr-4">
      @switch (data().masterGradingScale.value) {
        @case (MasterGradingScaleEnumLocal.OneToFour) {
          <ng-container
            *ngTemplateOutlet="
              gradeInput;
              context: {
                labelKey: 'entity.applicationPage2.label.masterGrade',
                tooltipKey: 'entity.applicationPage2.tooltip.masterGrade',
                control: page2Form().controls.masterGrade,
                model: getMasterGradeAsNumber(),
                modelChange: setMasterGradeAsNumber,
              }
            "
          />
        }
        @default {
          <span>Not Implemented</span>
        }
      }
    </div>
  </div>

  @if (applicationIdForDocuments(); as applicationId) {
    <div class="form-row justify-center">
      <div class="w-1/2">
        <jhi-upload-button
          [applicationId]="applicationId"
          documentType="MASTER_TRANSCRIPT"
          uploadKey="entity.upload.upload_instruction.MASTER_TRANSCRIPT"
          [documentIds]="documentIdsMasterTranscript()"
        />
      </div>
      <fa-icon
        icon="circle-info"
        class="upload-info-icon"
        pTooltip="{{ 'entity.applicationPage2.tooltip.filenamePrivacy' | translate }}"
        tooltipPosition="top"
      />
    </div>
  }
</form>

<ng-template
  #gradeInput
  let-labelKey="labelKey"
  let-tooltipKey="tooltipKey"
  let-control="control"
  let-model="model"
  let-modelChange="modelChange"
>
  <jhi-number-input
    [required]="true"
    [label]="labelKey | translate"
    [tooltipText]="tooltipKey | translate"
    [control]="control"
    [model]="model"
    (modelChange)="modelChange($event)"
    icon="circle-info"
    [min]="1"
    [max]="4"
    [minFractionDigits]="0"
    [maxFractionDigits]="1"
  />
</ng-template>
