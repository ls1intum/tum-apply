<jhi-dialog [visible]="visible()" (visibleChange)="onVisibleChange($event)" header="interview.assign.title" width="50rem">
  <div class="flex flex-col gap-6">
    <!-- Section 1: Selected Slot -->
    <div class="flex flex-col gap-2">
      <label class="text-sm font-medium text-text-primary" jhiTranslate="interview.assign.selectedSlot">Selected Slot</label>
      <div class="bg-background-default border border-border-default rounded p-4 flex flex-col gap-2">
        <!-- Date + Time -->
        <h3 class="text-base font-semibold text-text-primary">{{ slotDate() }} | {{ slotStartTime() }} - {{ slotEndTime() }}</h3>

        <!-- Location -->
        <div class="flex items-center gap-2 text-sm text-text-secondary">
          @if (slot().location === 'virtual') {
            <fa-icon icon="video" class="w-4 text-center" />
            <span jhiTranslate="interview.slots.location.virtual">Virtual</span>
          } @else {
            <fa-icon icon="location-dot" class="w-4 text-center" />
            <span jhiTranslate="interview.slots.location.inPerson">In-Person</span>
          }
        </div>
      </div>
    </div>

    <!-- Section 2: Interviewee Selection -->
    <div class="flex flex-col gap-2">
      <label class="text-sm font-medium text-text-primary">
        <span jhiTranslate="interview.assign.selectApplicant">Select Applicant</span>
        <span class="text-negative-default">*</span>
      </label>

      <!-- List Container / Table -->
      <div class="flex flex-col gap-2 max-h-[40vh] overflow-y-auto pr-1">
        @if (intervieweeState() === 'loading') {
          <div class="flex justify-center py-8"></div>
        } @else if (intervieweeState() === 'empty') {
          <div class="text-center py-8 text-text-secondary">
            <span jhiTranslate="interview.assign.noApplicants">No invited applicants available</span>
          </div>
        } @else if (intervieweeState() === 'allAssigned') {
          <div class="text-center py-8 text-text-secondary">
            <div class="flex flex-col items-center gap-2">
              <fa-icon icon="check-circle" class="text-2xl text-positive-default" />
              <span jhiTranslate="interview.assign.allAssigned">All applicants in the interview process already have an appointment</span>
            </div>
          </div>
        } @else {
          <jhi-dynamic-table
            [data]="availableInterviewees()"
            [columns]="[{ field: 'applicant', header: '', width: '100%', template: applicantTpl }]"
            [rows]="availableInterviewees().length"
            [totalRecords]="availableInterviewees().length"
            [hideHeader]="true"
          />
        }
      </div>
    </div>

    <div class="flex justify-end gap-3 pt-2">
      <jhi-button
        variant="outlined"
        severity="primary"
        label="button.cancel"
        [shouldTranslate]="true"
        size="sm"
        styleClass="w-28 h-10"
        (click)="closeModal()"
      />
      <jhi-button
        label="button.assign"
        severity="primary"
        [shouldTranslate]="true"
        [disabled]="!canAssign()"
        size="sm"
        styleClass="w-28 h-10"
        [loading]="assignLoading()"
        (click)="assignApplicant()"
      />
    </div>
  </div>

  <ng-template #applicantTpl let-person>
    <div class="flex items-center gap-3 cursor-pointer" (click)="selectApplicant(person)">
      <jhi-checkbox [model]="isSelected(person)" [errorEnabled]="false" (click)="$event.stopPropagation(); selectApplicant(person)" />
      <span class="font-medium text-text-primary">{{ person.user?.firstName }} {{ person.user?.lastName }}</span>
    </div>
  </ng-template>
</jhi-dialog>
