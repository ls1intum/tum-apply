<jhi-section [titleKey]="'interview.interviewees.title'">
  <!-- Actions Slot -->
  <div actions class="flex gap-2 ml-auto">
    <!--
    <jhi-button
      [label]="'interview.interviewees.sendInvitations'"
      [shouldTranslate]="true"
      [icon]="'paper-plane'"
      [variant]="'outlined'"
      [severity]="'primary'"
      [disabled]="true"
    />
    -->
    <jhi-button [label]="'interview.interviewees.add'" [icon]="'plus'" [severity]="'primary'" size="sm"
      [shouldTranslate]="true" (click)="openAddModal()" />
  </div>

  <!-- Main Content -->

  <!-- Filter Tabs -->
  <div class="flex gap-6 mb-4 border-b border-border-default">
    @for (tab of filterTabs(); track tab.key) {
    <button class="flex items-center gap-2 pb-3 text-sm font-medium transition-colors border-b-2 -mb-px"
      [class.border-primary-default]="activeFilter() === tab.key"
      [class.text-primary-default]="activeFilter() === tab.key" [class.border-transparent]="activeFilter() !== tab.key"
      [class.text-text-secondary]="activeFilter() !== tab.key"
      [class.hover:text-text-primary]="activeFilter() !== tab.key" (click)="setFilter(tab.key)">
      <span>{{ 'interview.interviewees.filter.' + tab.key | translate }}</span>
      <span class="px-2 py-0.5 text-xs rounded-full" [class.bg-primary-default]="activeFilter() === tab.key"
        [class.text-text-on-primary]="activeFilter() === tab.key"
        [class.bg-background-disabled]="activeFilter() !== tab.key"
        [class.text-text-primary]="activeFilter() !== tab.key">
        {{ tab.count }}
      </span>
    </button>
    }
  </div>

  <!-- Interviewees List -->
  @if (loadingInterviewees()) {
  <div class="flex justify-center py-8">
    <p-progressSpinner [style]="{ width: '2.5rem', height: '2.5rem' }" strokeWidth="4" />
  </div>
  } @else if (filteredInterviewees().length === 0) {
  <div class="flex flex-col items-center justify-center py-12 text-center">
    <i class="fa-solid fa-users text-4xl text-text-tertiary mb-3"></i>
    <p class="text-text-secondary" jhiTranslate="interview.interviewees.empty">No interviewees yet</p>
  </div>
  } @else {
  <div class="flex flex-col gap-2">
    @for (interviewee of filteredInterviewees(); track interviewee.id) {
    <jhi-interviewee-card [interviewee]="interviewee" />
    }
  </div>
  }

</jhi-section>

<!-- ═══════════════════════════════════════════════════════════════════════ -->
<!-- Add Applicant Modal - Simple Version -->
<!-- ═══════════════════════════════════════════════════════════════════════ -->
<p-dialog [modal]="true" [(visible)]="showAddModal" [closable]="true" [draggable]="false"
  [style]="{ width: '30rem', maxWidth: '95vw' }">
  <ng-template #header>
    <span class="text-lg font-semibold" jhiTranslate="interview.interviewees.addTitle">Add Applicant</span>
  </ng-template>

  <!-- Simple List -->
  <div class="flex flex-col max-h-[25rem] overflow-y-auto">
    @if (loadingApplicants()) {
    <div class="flex justify-center py-8">
      <p-progressSpinner [style]="{ width: '2rem', height: '2rem' }" strokeWidth="4" />
    </div>
    } @else if (availableApplicants().length === 0) {
    <div class="py-8 text-center text-text-secondary" jhiTranslate="interview.interviewees.noApplicants">
      No applicants available
    </div>
    } @else {
    @for (applicant of availableApplicants(); track applicant.applicationDetailDTO.applicationId) {
    <div class="flex items-center gap-3 p-3 cursor-pointer hover:bg-background-surface transition-colors rounded-md"
      [class.bg-background-surface]="isSelected(applicant.applicationDetailDTO.applicationId)"
      (click)="toggleSelection(applicant.applicationDetailDTO.applicationId)">
      <p-checkbox [binary]="true" [ngModel]="isSelected(applicant.applicationDetailDTO.applicationId)"
        (click)="$event.stopPropagation()" />
      <div class="flex-1">
        <div class="font-medium text-text-primary">
          {{ applicant.applicationDetailDTO.applicant?.user?.name ?? 'Unknown' }}
        </div>
      </div>
    </div>
    }
    }
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-2">
      <div class="w-24">
        <jhi-button [label]="'button.add'" [severity]="'primary'" [disabled]="selectedCount() === 0"
          [loading]="submitting()" [shouldTranslate]="true" [fullWidth]="true" size="sm" (click)="addInterviewees()" />
      </div>
    </div>
  </ng-template>
</p-dialog>