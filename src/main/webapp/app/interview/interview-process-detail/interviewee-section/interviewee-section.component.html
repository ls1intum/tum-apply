<jhi-section [titleKey]="'interview.interviewees.title'">
  <!-- Actions Slot -->
  <div actions class="flex gap-2 ml-auto">
    <jhi-button
      [label]="'interview.interviewees.add'"
      [icon]="'plus'"
      [severity]="'primary'"
      size="sm"
      [shouldTranslate]="true"
      (click)="openAddModal()"
    />
  </div>

  <!-- Filter Tabs -->
  <div class="flex gap-6 mb-4 border-b border-border-default -ml-3">
    @for (tab of filterTabs(); track tab.key) {
      <button
        class="flex items-center gap-2 pb-3 text-sm transition-colors border-b-2 -mb-px"
        [class.border-primary-default]="activeFilter() === tab.key"
        [class.text-primary-default]="activeFilter() === tab.key"
        [class.border-transparent]="activeFilter() !== tab.key"
        [class.text-text-secondary]="activeFilter() !== tab.key"
        [class.hover:text-text-primary]="activeFilter() !== tab.key"
        (click)="setFilter(tab.key)"
      >
        <span [jhiTranslate]="'interview.interviewees.filter.' + tab.key"></span>
        <span
          class="px-2 py-0.5 text-xs rounded-full"
          [class.bg-primary-default]="activeFilter() === tab.key"
          [class.text-text-on-primary]="activeFilter() === tab.key"
          [class.bg-background-disabled]="activeFilter() !== tab.key"
          [class.text-text-primary]="activeFilter() !== tab.key"
        >
          {{ tab.count }}
        </span>
      </button>
    }
  </div>

  <!-- Interviewees List -->
  @if (loadingInterviewees()) {
  } @else if (filteredInterviewees().length === 0) {
    <div class="flex flex-col items-center justify-center py-12 text-center">
      <p class="text-text-secondary" jhiTranslate="interview.interviewees.empty">No interviewees yet</p>
    </div>
  } @else {
    <div class="flex flex-col gap-2 -ml-3">
      @for (interviewee of filteredInterviewees(); track interviewee.id) {
        <jhi-interviewee-card [interviewee]="interviewee" />
      }
    </div>
  }
</jhi-section>

<!-- ═══════════════════════════════════════════════════════════════════════ -->
<!-- Add Applicant Modal - Simple Version -->
<!-- ═══════════════════════════════════════════════════════════════════════ -->
<p-dialog
  [modal]="true"
  [(visible)]="showAddModal"
  [closable]="true"
  [draggable]="false"
  [style]="{ width: '30rem', maxWidth: '95vw' }"
  [header]="'interview.interviewees.addTitle' | translate"
>
  <!-- Simple List -->
  <div class="flex flex-col max-h-[25rem] overflow-y-auto">
    @if (loadingApplicants()) {
    } @else if (availableApplicants().length === 0) {
      <div class="py-8 text-center text-text-secondary" jhiTranslate="interview.interviewees.noApplicants">No applicants available</div>
    } @else {
      @for (applicant of availableApplicants(); track applicant.applicationDetailDTO.applicationId) {
        <div
          class="flex items-center gap-3 p-3 cursor-pointer hover:bg-background-surface transition-colors rounded-md"
          [class.bg-background-surface]="applicant.selected"
          (click)="toggleSelection(applicant.applicationDetailDTO.applicationId)"
        >
          <p-checkbox [binary]="true" [ngModel]="applicant.selected" (click)="$event.stopPropagation()" />
          <div class="flex-1">
            <div class="font-medium text-text-primary">
              {{ applicant.applicationDetailDTO.applicant?.user?.name ?? 'Unknown' }}
            </div>
          </div>
        </div>
      }
    }
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-end gap-2">
      <jhi-button
        [label]="'entity.action.cancel'"
        [severity]="'primary'"
        [variant]="'outlined'"
        [shouldTranslate]="true"
        size="sm"
        [styleClass]="'w-28 h-10'"
        (click)="closeAddModal()"
      />
      <jhi-button
        [label]="'interview.interviewees.addSelected'"
        [severity]="'primary'"
        [disabled]="selectedCount() === 0"
        [loading]="submitting()"
        [shouldTranslate]="true"
        size="sm"
        [styleClass]="'w-28 h-10'"
        (click)="addInterviewees()"
      />
    </div>
  </ng-template>
</p-dialog>
