<article
  (click)="onCardClick()"
  class="flex flex-col rounded-lg border border-border-default bg-background-default overflow-hidden cursor-pointer transition-all hover:bg-background-surface"
  [ngClass]="{ 'opacity-80': processStatus() === 'CLOSED' }"
>
  <!-- Header (Job Image Area) -->
  <div
    class="px-4 py-3 flex justify-end min-h-[6rem] relative bg-cover bg-center flex-shrink-0"
    [ngClass]="processStatus() === 'CLOSED' ? 'bg-background-surface-alt border-b border-border-default' : 'bg-primary'"
    [style.backgroundImage]="process().imageUrl ? 'url(' + process().imageUrl + ')' : null"
  >
    <div>
      <jhi-tag
        [text]="processStatus() === 'CLOSED' ? 'Closed' : 'Active'"
        [color]="processStatus() === 'CLOSED' ? 'secondary' : 'success'"
      />
    </div>
  </div>

  <!-- Body Area -->
  <div class="flex flex-col px-4 py-3 gap-3">
    <!-- Job Title -->
    <h3 class="text-lg font-semibold line-clamp-2 m-0 leading-tight text-text" [title]="process().jobTitle">
      {{ process().jobTitle }}
    </h3>

    <!-- Warning Alert -->
    @if (processStatus() !== 'CLOSED' && process().invitedCount > totalSlots()) {
      <jhi-message
        severity="warn"
        [message]="
          totalSlots() === 0
            ? process().invitedCount === 1
              ? 'interview.warning.zeroSlotsSingular'
              : 'interview.warning.zeroSlots'
            : process().invitedCount === 1
              ? 'interview.warning.notEnoughSlotsSingular'
              : 'interview.warning.notEnoughSlots'
        "
        [shouldTranslate]="true"
        [translationParams]="{ invited: process().invitedCount, slots: totalSlots() }"
      />
    }

    <!-- Metrics Row -->
    <div class="flex items-center justify-between gap-4">
      <!-- Metric: Invited -->
      <div class="flex flex-col">
        <span class="text-xs text-text-secondary uppercase tracking-wider font-semibold" jhiTranslate="interview.overview.metrics.invited"
          >Invited</span
        >
        <div class="flex items-center gap-2 mt-0.5">
          <fa-icon icon="user-group" class="text-lg" [ngClass]="processStatus() === 'CLOSED' ? 'text-text-secondary' : 'icon'" />
          <span class="text-lg font-bold leading-none" [ngClass]="processStatus() === 'CLOSED' ? 'text-text-secondary' : 'text-text'">{{
            process().invitedCount
          }}</span>
        </div>
      </div>

      <!-- Metric: Scheduled -->
      <div class="flex flex-col">
        <span class="text-xs text-text-secondary uppercase tracking-wider font-semibold" jhiTranslate="interview.overview.metrics.scheduled"
          >Scheduled</span
        >
        <div class="flex items-center gap-2 mt-0.5">
          <fa-icon icon="calendar-check" class="text-lg" [ngClass]="processStatus() === 'CLOSED' ? 'text-text-secondary' : 'icon'" />
          <span class="text-lg font-bold leading-none" [ngClass]="processStatus() === 'CLOSED' ? 'text-text-secondary' : 'text-text'">{{
            process().scheduledCount
          }}</span>
        </div>
      </div>

      <!-- Metric: Total Slots -->
      <div class="flex flex-col">
        <span
          class="text-xs text-text-secondary uppercase tracking-wider font-semibold"
          jhiTranslate="interview.overview.metrics.totalSlots"
          >Total Slots</span
        >
        <div class="flex items-center gap-2 mt-0.5">
          <fa-icon icon="clock" class="text-lg" [ngClass]="processStatus() === 'CLOSED' ? 'text-text-secondary' : 'icon'" />
          <span class="text-lg font-bold leading-none" [ngClass]="processStatus() === 'CLOSED' ? 'text-text-secondary' : 'text-text'">{{
            totalSlots()
          }}</span>
        </div>
      </div>
    </div>
  </div>
</article>
