<jhi-search-filter-sort-bar
  [totalRecords]="totalRecords()"
  [singleEntity]="'job' | translate"
  [multipleEntities]="'jobs' | translate"
  [searchText]="'jobOverviewPage.searchFilterSortBar.searchText' | translate"
  (searchOutput)="onSearchEmit($event)"
  (filterOutput)="onFilterEmit($event)"
  (sortOutput)="onSortEmit($event)"
  [filters]="[
    {
      filterId: 'fieldOfStudies',
      filterLabel: 'jobOverviewPage.searchFilterSortBar.filterOptions.fieldOfStudies',
      filterSearchPlaceholder: 'jobOverviewPage.searchFilterSortBar.filterOptions.fieldOfStudiesPlaceholder',
      filterOptions: allFieldOfStudies(),
    },
    {
      filterId: 'location',
      filterLabel: 'jobOverviewPage.searchFilterSortBar.filterOptions.location',
      filterSearchPlaceholder: 'jobOverviewPage.searchFilterSortBar.filterOptions.LocationSearchPlaceholder',
      filterOptions: availableLocationLabels,
    },
    {
      filterId: 'supervisor',
      filterLabel: 'jobOverviewPage.searchFilterSortBar.filterOptions.supervisor',
      filterSearchPlaceholder: 'jobOverviewPage.searchFilterSortBar.filterOptions.supervisorSearchPlaceholder',
      filterOptions: allSupervisorNames(),
    },
  ]"
  [sortableFields]="sortableFields"
/>
@if (jobs().length > 0) {
  <div class="grid grid-cols-[repeat(auto-fill,minmax(16.5rem,20rem))] gap-4 py-4 justify-center">
    @for (job of jobs(); track job.jobId; let i = $index) {
      <jhi-job-card
        [jobId]="job.jobId"
        [jobTitle]="job.title"
        [fieldOfStudies]="job.fieldOfStudies"
        [location]="job.location.toString()"
        [professor]="job.professorName"
        [workload]="job.workload || undefined"
        [startDate]="job.startDate?.toString() || undefined"
        [relativeTime]="(currentLanguage() === 'EN' ? job.relativeTimeEnglish : job.relativeTimeGerman) ?? ''"
        [applicationId]="job.applicationId"
        [applicationState]="job.applicationState ?? ApplicationStatusExtendedLocal.NotYetApplied"
        [contractDuration]="job.contractDuration"
        [headerImageUrl]="getExampleImageUrl(i)"
      />
    }
  </div>
} @else {
  <p class="text-center p-8" jhiTranslate="jobOverviewPage.noJobsFound"></p>
}
<p-table
  [value]="jobs()"
  [paginator]="true"
  [rows]="pageSize()"
  [totalRecords]="totalRecords()"
  [lazy]="true"
  (onLazyLoad)="loadOnTableEmit($event)"
  [tableStyle]="{ width: '100%' }"
/>
