import { JobFormDTO } from '../generated/model/jobFormDTO';

export const locations = [
  { value: JobFormDTO.LocationEnum.Garching, name: 'jobCreationForm.basicInformationSection.locations.Garching' },
  { value: JobFormDTO.LocationEnum.GarchingHochbrueck, name: 'jobCreationForm.basicInformationSection.locations.GarchingHochbrueck' },
  { value: JobFormDTO.LocationEnum.Heilbronn, name: 'jobCreationForm.basicInformationSection.locations.Heilbronn' },
  { value: JobFormDTO.LocationEnum.Munich, name: 'jobCreationForm.basicInformationSection.locations.Munich' },
  { value: JobFormDTO.LocationEnum.Singapore, name: 'jobCreationForm.basicInformationSection.locations.Singapore' },
  { value: JobFormDTO.LocationEnum.Straubing, name: 'jobCreationForm.basicInformationSection.locations.Straubing' },
  { value: JobFormDTO.LocationEnum.Weihenstephan, name: 'jobCreationForm.basicInformationSection.locations.Weihenstephan' },
];
export const fieldsOfStudies = [
  { value: 'Aerospace Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.AerospaceEngineering' },
  { value: 'Agricultural Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.AgriculturalEngineering' },
  { value: 'Architecture', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Architecture' },
  { value: 'Art History', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.ArtHistory' },
  { value: 'Automotive Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.AutomotiveEngineering' },
  { value: 'Bioengineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Bioengineering' },
  { value: 'Biology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Biology' },
  { value: 'Biotechnology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Biotechnology' },
  { value: 'Chemistry', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Chemistry' },
  { value: 'Computer Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.ComputerEngineering' },
  { value: 'Computer Science', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.ComputerScience' },
  { value: 'Data Science', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.DataScience' },
  { value: 'Economics', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Economics' },
  { value: 'Education Technology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.EducationTechnology' },
  { value: 'Electrical Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.ElectricalEngineering' },
  { value: 'Environmental Biology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.EnvironmentalBiology' },
  { value: 'Environmental Chemistry', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.EnvironmentalChemistry' },
  { value: 'Environmental Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.EnvironmentalEngineering' },
  { value: 'Environmental Science', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.EnvironmentalScience' },
  { value: 'Financial Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.FinancialEngineering' },
  { value: 'Food Technology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.FoodTechnology' },
  { value: 'Geology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Geology' },
  { value: 'Geosciences', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Geosciences' },
  { value: 'Industrial Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.IndustrialEngineering' },
  { value: 'Information Systems', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.InformationSystems' },
  { value: 'Informatics', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Informatics' },
  { value: 'Linguistics', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Linguistics' },
  { value: 'Marine Biology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.MarineBiology' },
  { value: 'Materials Science', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.MaterialsScience' },
  { value: 'Mathematics', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Mathematics' },
  { value: 'Mechanical Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.MechanicalEngineering' },
  { value: 'Medical Informatics', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.MedicalInformatics' },
  { value: 'Neuroscience', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Neuroscience' },
  { value: 'Philosophy', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Philosophy' },
  { value: 'Physics', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Physics' },
  { value: 'Psychology', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Psychology' },
  { value: 'Software Engineering', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.SoftwareEngineering' },
  { value: 'Sports Science', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.SportsScience' },
  { value: 'Telecommunications', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.Telecommunications' },
  { value: 'Urban Planning', name: 'jobCreationForm.basicInformationSection.fieldsOfStudies.UrbanPlanning' },
];
export const fundingTypes = [
  { value: JobFormDTO.FundingTypeEnum.FullyFunded, name: 'jobCreationForm.basicInformationSection.fundingTypes.FullyFunded' },
  { value: JobFormDTO.FundingTypeEnum.GovernmentFunded, name: 'jobCreationForm.basicInformationSection.fundingTypes.GovernmentFunded' },
  { value: JobFormDTO.FundingTypeEnum.IndustrySponsored, name: 'jobCreationForm.basicInformationSection.fundingTypes.IndustrySponsored' },
  { value: JobFormDTO.FundingTypeEnum.ResearchGrant, name: 'jobCreationForm.basicInformationSection.fundingTypes.ResearchGrant' },
  { value: JobFormDTO.FundingTypeEnum.Scholarship, name: 'jobCreationForm.basicInformationSection.fundingTypes.Scholarship' },
  { value: JobFormDTO.FundingTypeEnum.SelfFunded, name: 'jobCreationForm.basicInformationSection.fundingTypes.SelfFunded' },
  { value: JobFormDTO.FundingTypeEnum.PartiallyFunded, name: 'jobCreationForm.basicInformationSection.fundingTypes.PartiallyFunded' },
];

export const locationNameToValueMap = new Map(locations.map(option => [option.name, option.value]));

export function mapLocationNames(translationKeys: string[]): JobFormDTO.LocationEnum[] {
  return translationKeys
    .map(key => locationNameToValueMap.get(key))
    .filter((value): value is JobFormDTO.LocationEnum => value !== undefined);
}

export function getLocationTranslationKey(location: string | undefined): string {
  if (location == null) return '-';
  // Maps formatted string (e.g. "Garching Hochbrueck", "GARCHING_HOCHBRUECK") to translation key
  return new Map(locations.map(option => [option.value as string, option.name])).get(toEnumString(location)) ?? toEnumString(location);
}

export function getFundingTypeTranslationKey(fundingType: string | undefined): string {
  if (fundingType == null) return '-';
  // Maps formatted string (e.g. "Fully Funded", "FULLY_FUNDED") to translation key
  return (
    new Map(fundingTypes.map(option => [option.value as string, option.name])).get(toEnumString(fundingType)) ?? toEnumString(fundingType)
  );
}

export function getFieldOfStudiesTranslationKey(fieldOfStudies: string | undefined): string {
  if (fieldOfStudies == null) return '-';
  return fieldsOfStudies.find(fs => fs.value === fieldOfStudies)?.name ?? fieldOfStudies;
}

// Converts a string like "Garching Hochbrueck" to "GARCHING_HOCHBRUECK";
export function toEnumString(value: string): string {
  if (/^[A-Z_]+$/.test(value)) {
    return value;
  }
  return value
    .trim()
    .split(/\s+/)
    .map((part: string) => part.replace(/[^A-Za-z0-9]/g, ''))
    .filter((part: string) => part.length > 0)
    .map((part: string) => part.toUpperCase())
    .join('_');
}
