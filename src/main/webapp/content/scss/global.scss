@use 'tailwindcss' as *;
@use './tokens' as *;
@use './_header.scss';
@use './_layout.scss';
@use './breakpoints' as bp;

@use './prime-ng-overrides.scss';

@plugin "tailwindcss-primeui";
@custom-variant dark (&:where(.tum-apply-dark-mode, .tum-apply-dark-mode *)); //dark mode configuration

/* -------------------------------
   Custom Global Styles for Inputs
---------------------------------- */
.label-input-wrapper {
  display: flex;
  flex-direction: column;

  // Add styling for labels on the top of the field
  &.label-top .custom-label {
    margin-bottom: 0.25rem;
  }

  .fa-circle-info {
    color: var(--p-primary-color);
  }

  .fa-globe {
    color: var(--p-primary-color);
  }

  .fa-envelope {
    color: var(--p-primary-color);
  }

  .fa-id-card {
    color: var(--p-primary-color);
  }

  .p-inputtext:enabled:focus {
    box-shadow: none;
    border: 0.1rem solid var(--p-primary-color);
  }

  .p-inputtext {
    border: 0.1rem solid var(--p-border-default);
  }

  .p-inputtext::placeholder {
    color: var(--p-text-tertiary);
  }

  .p-inputtext:disabled {
    background-color: var(--p-background-disabled);
    color: var(--p-text-disabled);
  }

  .p-inputtext:disabled::placeholder {
    color: var(--p-text-disabled);
  }

  .error .p-editor-content,
  .error .p-inputtext {
    border-color: var(--p-danger-color) !important;
  }
}

.custom-label {
  margin-bottom: 0.25rem;
  color: var(--p-text-primary);
}

.required {
  color: var(--p-danger-color);
}

.error-text {
  color: var(--p-danger-color);
  min-height: 1.5rem;
}

// Styles for the Dynamic Table component
.p-datatable .p-datatable-tbody > tr > td,
.p-datatable .p-datatable-thead > tr > th {
  background: var(--p-background-default);
  color: var(--p-datatable-row-color);
}
.p-datatable .p-datatable-thead {
  position: inherit !important;
}

.selection-col {
  width: 5rem;
}

.external-icon {
  font-size: 1rem;
  position: relative;
}

.icon {
  color: var(--p-primary-color);
}

/* --------------------------------------------------
   Custom Global Styles for Menu Component (jhi-menu)

   Styles for menu items with severity colors
   Applied globally because popup menus are rendered
   outside component with appendTo="body"
--------------------------------------------------- */

// Remove jhi-menu from layout flow to prevent spacing issues
jhi-menu {
  position: absolute;
  width: 0;
  height: 0;
  overflow: hidden;
}

.p-menu-list {
  padding: 0;
}

.p-menu-item-link {
  border-radius: var(--border-radius-md);
  &.menu-primary {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-primary-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-primary-color);
      }
    }
  }

  &.menu-secondary {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-secondary-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-secondary-color);
      }
    }
  }

  &.menu-success {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-success-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-success-color);
      }
    }
  }

  &.menu-warn {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-warn-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-warn-color);
      }
    }
  }

  &.menu-danger {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-danger-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-danger-color);
      }
    }
  }

  &.menu-info {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-neutral-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-neutral-color);
      }
    }
  }

  &.menu-contrast {
    color: var(--p-text-primary);

    .p-menu-item-icon {
      color: var(--p-text-primary);
    }

    &:hover {
      background-color: var(--p-accent-hover-color-outlined);
      .p-menu-item-icon {
        color: var(--p-accent-color);
      }
    }
  }

  &.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }
}

/* --------------------------------------------------
   Custom Global Styles for Atomic Editor Component

   fixes the issue, that the editor originally
   does not grow with a larger placeholder
--------------------------------------------------- */

.ql-editor {
  background: var(--p-background-default);
  color: var(--p-text-primary);
  overflow-wrap: anywhere;
  border-radius: 0 0 var(--border-radius-md) var(--border-radius-md);
}

.ql-editor.ql-blank {
  color: var(--p-text-tertiary);
}

.ql-editor.ql-blank::before {
  content: none;
}

.ql-editor.ql-blank::after {
  content: attr(data-placeholder);
  display: block;
  font-style: italic;
  margin-top: -1.15rem;
  min-height: 0.81rem;
  pointer-events: none;
}

/* -------------------------------
   Primeng Editor Toolbar Styling
---------------------------------- */

/* Toolbar background */
.ql-toolbar,
.custom-quill-editor .ql-toolbar {
  background: var(--p-background-default) !important;
  border-color: var(--p-border-default) !important;
  border: 1px solid var(--p-border-default) !important;
  border-radius: var(--border-radius-md) var(--border-radius-md) 0 0 !important;
}

/* Default text color for toolbar buttons and pickers */
.ql-picker-label,
.ql-picker-item,
.custom-quill-editor .ql-toolbar button {
  color: var(--p-text-secondary) !important;
}

/* Default icon styling */
.p-editor .ql-toolbar .ql-fill,
.custom-quill-editor .ql-fill {
  fill: var(--p-text-secondary) !important;
}

.p-editor .ql-toolbar .ql-stroke,
.custom-quill-editor .ql-stroke {
  stroke: var(--p-text-secondary) !important;
}

/* Picker select component background */
.ql-picker-options {
  color: var(--p-text-secondary) !important;
  background: var(--p-background-default) !important;
}

/* -------------------------------
   Active State
---------------------------------- */
.p-editor button.ql-active,
.custom-quill-editor .ql-toolbar button.ql-active {
  color: var(--p-primary-color) !important;
}

.custom-quill-editor .ql-toolbar button.ql-active .ql-fill {
  fill: var(--p-primary-color) !important;
}

.p-editor .ql-snow.ql-toolbar button.ql-active .ql-stroke,
.custom-quill-editor .ql-toolbar button.ql-active .ql-stroke {
  stroke: var(--p-primary-color) !important;
}

/* -------------------------------
   Hover State
---------------------------------- */
.p-editor button:hover,
.custom-quill-editor .ql-toolbar button:hover {
  color: var(--p-primary-color) !important;
}

.p-editor button:hover .ql-fill,
.custom-quill-editor .ql-toolbar button:hover .ql-fill {
  fill: var(--p-primary-color) !important;
}

.p-editor .ql-snow.ql-toolbar button:hover .ql-stroke,
.custom-quill-editor .ql-toolbar button:hover .ql-stroke {
  stroke: var(--p-primary-color) !important;
}

/* -------------------------------
   Picker Expanded State
---------------------------------- */
.p-editor .ql-snow.ql-toolbar .ql-picker.ql-expanded .ql-picker-label {
  color: var(--p-primary-color);
}

.p-editor .ql-snow.ql-toolbar .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
  stroke: var(--p-primary-color);
}

/* -------------------------------
   Primeng Editor Border Styling
---------------------------------- */
.p-editor-toolbar.ql-toolbar,
.custom-quill-editor .ql-toolbar {
  border-bottom: none !important;
  border-color: var(--p-border-default) !important;
  background: var(--p-background-default) !important;
  border-radius: var(--border-radius-md) var(--border-radius-md) 0 0 !important;
}

.p-editor-content.ql-container.ql-snow,
.custom-quill-editor .ql-container {
  background: var(--p-background-default) !important;
  border-color: var(--p-border-default) !important;
  border: 1px solid var(--p-border-default) !important;
  border-radius: 0 0 var(--border-radius-md) var(--border-radius-md) !important;

  &:focus-within {
    border-color: var(--p-primary-color) !important;
  }
}

/* Styles for the My Positions page */
.my-positions-container {
  // Align the paginator and table contents
  .p-datatable-tbody > tr > td:first-child,
  .p-datatable-thead > tr > th:first-child {
    padding-left: 0;
  }

  .p-datatable-tbody > tr > td:last-child {
    padding-right: 0;
  }
}

/* Styles for the tooltip icon in the Select component */
.select-wrapper {
  .fa-circle-info {
    color: var(--p-primary-color);
  }
}

.p-dialog-header {
  color: var(--p-text-primary);
}

/* Styles for the tooltip icon in the Upload component */
.upload-info-icon {
  color: var(--p-primary-color);
  margin-left: 0.5rem;
  font-size: 1rem;
}

/* Styling for links */
.link,
.description-text a,
.text-card a,
.detail-card a {
  color: var(--p-primary-color);

  &:hover {
    color: var(--p-primary-color-hover);
    text-decoration: underline;
  }
}

/* Override PrimeNG Styling for search border in select component */
.p-select-filter.p-component.p-inputtext {
  border: 0.1rem solid var(--p-border-default);

  &:enabled:focus,
  &:enabled:hover {
    box-shadow: none;
    border-color: var(--p-primary-color);
  }
}

/* Styles for overriding list styles in Job Detail Page */
.description-text ol,
.description-text ul,
.text-card ol,
.text-card ul,
.detail-card ol,
.detail-card ul {
  margin-left: 2rem;
  list-style: initial;
}

/* ---------------------------
 Style for file upload component
------------------------------- */
.p-fileupload-content {
  background: var(--p-background-default);
  color: var(--p-text-color);
}

.p-fileupload-header {
  background: var(--p-background-default);
  color: var(--p-text-color);
}

/* ---------------------------
 Style primeNg tab component. Must have class="basic-tabs"
------------------------------- */
.basic-tabs {
  background: var(--p-background-default);

  .p-tab-active {
    border-top: transparent;
    border-bottom: 0.17rem solid var(--p-primary-color);
  }
}

.basic-tab {
  background: var(--p-background-default);
}

/* ---------------------------
   Reusable Detail Card Components
------------------------------- */
// Base card styles - shared between all card types
.section-card {
  border: 0.1rem solid var(--p-border-default);
  border-radius: var(--border-radius-lg);
  padding: 1.5rem;
  margin-bottom: 2rem;
}

// Detail card extends base card with additional structure
.section-detail-card {
  @extend .section-card;

  .section-card-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    border-bottom: 0.05rem solid var(--p-border-default);
    margin-bottom: 1rem;
    padding-bottom: 1rem;
  }

  .section-card-title {
    font-weight: 600;
    margin: 0;
  }

  .section-card-body {
    font-size: 0.875rem;
    overflow-wrap: anywhere;
  }
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: start;
  margin-bottom: 1rem;
}

.section-title {
  font-size: 1.25rem;
  font-weight: 600;
  padding-bottom: 0.5rem;
}

// Generic info item (used for overview and other info displays)
.info-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.875rem;
}

// Info list for structured data display
.info-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.875rem;

  .label {
    font-weight: 600;
  }

  .value {
    text-align: right;
  }
}

@media (max-width: bp.$md) {
  .info-row {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.25rem;

    .value {
      text-align: left !important;
    }
  }
}

/* ---------------------------
   PrimeNG Carousel Indicators (Hero)
------------------------------- */
.hero-carousel {
  position: relative;
}

.hero-carousel .p-carousel-indicators,
.hero-carousel .p-carousel-indicator-list {
  position: absolute;
  right: 50%;
  transform: translateX(50%);
  bottom: 0.25rem;
}

.hero-carousel .p-carousel-indicator .p-carousel-indicator-button {
  width: 0.6rem;
  height: 0.6rem;
  border-radius: var(--border-radius-full);
}

.hero-overlay {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 1rem;
  z-index: 2;
  pointer-events: none; // Disable pointer events for the carousel indicators
}

/* -------------------------------
 Style primeNg filter select component.
-------------------------------
 */
.p-select-list-container {
  max-height: 11.5rem !important;
}

/* -------------------------------
 Style primeNg tooltip component.
-------------------------------
 */

.p-tooltip .external-link {
  color: var(--p-primary-color);
  text-decoration: underline;
  cursor: pointer;
}

/* -------------------------------
   Research Group Detail Dialog Styling
------------------------------- */
.research-group-detail-dialog .p-dialog-title {
  font-size: 1.5rem;
  font-weight: bold;
  color: var(--p-primary-color);
}

/* -------------------------------
   Identity Provider Brand Colors
------------------------------- */
.fa-apple {
  color: #000000 !important;
  font-size: 1.25em !important; // Slightly increase size to match Google icon
}

.tum-apply-dark-mode .fa-apple {
  color: #ffffff !important;
}

.fa-google {
  color: #4285f4 !important;
}
