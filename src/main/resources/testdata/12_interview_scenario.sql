-- ===========================================================
-- 12_interview_scenario.sql
-- Scenario: Invites 'applicant1' (Max Applicant) to an interview process and adds EXTENSIVE slots for testing.
-- Prerequisites: Run 01_users.sql, 10_interview_processes.sql, 07_applications.sql
-- ===========================================================

-- 1. Create Slots for existing Process 30001 (Linked to Job 20001)
-- Dates: A mix of virtual and in-person slots testing various densities and ranges.

INSERT INTO interview_slots (id, start_date_time, end_date_time, interview_process_id, location, created_at)
VALUES
-- Original Slots (Tomorrow)
('00000000-0000-0000-0000-000000099001', DATE_ADD(CURRENT_DATE, INTERVAL 34 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 35 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
('00000000-0000-0000-0000-000000099002', DATE_ADD(CURRENT_DATE, INTERVAL 38 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 39 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()),

-- EXTENSIVE TESTING SLOTS

-- A. MANY Slots for TOMORROW (Test vertical scrolling/density & Show More button)
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 32 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 33 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 33 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 34 HOUR), '00000000-0000-0000-0000-000000030001', 'Room 101', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 35 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 36 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 36 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 37 HOUR), '00000000-0000-0000-0000-000000030001', 'Building A', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 37 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 38 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 39 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 40 HOUR), '00000000-0000-0000-0000-000000030001', 'Zoom Link', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 40 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 41 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 41 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 42 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 42 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 43 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 43 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 44 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()),

-- B. Slots for NEXT 12 DAYS (Test horizontal scrolling / pagination)
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 58 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 59 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()), -- Day 2
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 62 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 63 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()), -- Day 2
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 82 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 83 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()), -- Day 3
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 106 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 107 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()), -- Day 4
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 130 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 131 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()), -- Day 5
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 154 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 155 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()), -- Day 6
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 178 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 179 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()), -- Day 7
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 202 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 203 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()), -- Day 8
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 226 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 227 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()), -- Day 9
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 250 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 251 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()), -- Day 10
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 274 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 275 HOUR), '00000000-0000-0000-0000-000000030001', 'virtual', NOW()), -- Day 11
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 298 HOUR), DATE_ADD(CURRENT_DATE, INTERVAL 299 HOUR), '00000000-0000-0000-0000-000000030001', 'in-person', NOW()), -- Day 12

-- C. Slots for NEXT MONTH (Test Month Navigation)
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 30 DAY), DATE_ADD(CURRENT_DATE, INTERVAL 30 DAY) + INTERVAL 1 HOUR, '00000000-0000-0000-0000-000000030001', 'virtual', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 30 DAY) + INTERVAL 2 HOUR, DATE_ADD(CURRENT_DATE, INTERVAL 30 DAY) + INTERVAL 3 HOUR, '00000000-0000-0000-0000-000000030001', 'Room 202', NOW()),
(UUID(), DATE_ADD(CURRENT_DATE, INTERVAL 31 DAY), DATE_ADD(CURRENT_DATE, INTERVAL 31 DAY) + INTERVAL 1 HOUR, '00000000-0000-0000-0000-000000030001', 'virtual', NOW())
ON DUPLICATE KEY UPDATE created_at = created_at;


-- 2. Invite applicant1 to Process 30001
-- Uses existing Application 300000020002 (Applicant 1 -> Job 20001)
INSERT INTO interviewees (id, interview_process_id, application_id, last_invited, created_at)
VALUES
('00000000-0000-0000-0000-000000099100', '00000000-0000-0000-0000-000000030001', '00000000-0000-0000-0000-300000020002', NOW(), NOW())
ON DUPLICATE KEY UPDATE last_invited = NOW();

-- 3. Add UNCONTACTED interviewees for Bulk Send Testing (last_invited = NULL)
-- Uses existing applications from 07_applications.sql
INSERT INTO interviewees (id, interview_process_id, application_id, last_invited, created_at)
VALUES
-- Amelie Bauer (Application 300000020001 -> Job 20001)
('00000000-0000-0000-0000-000000099101', '00000000-0000-0000-0000-000000030001', '00000000-0000-0000-0000-300000020001', NULL, NOW()),
-- Jay Patel (Application 300000023331 -> Job 20001, REJECTED status but still usable for testing)
('00000000-0000-0000-0000-000000099102', '00000000-0000-0000-0000-000000030001', '00000000-0000-0000-0000-300000023331', NULL, NOW())
ON DUPLICATE KEY UPDATE last_invited = NULL;
